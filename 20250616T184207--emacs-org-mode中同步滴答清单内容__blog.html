<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2026-01-19 周一 22:48 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>emacs-org-mode中同步滴答清单内容</title>
<meta name="generator" content="Org Mode" />
<link rel='stylesheet' type='text/css' href='/org.css'/>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="preamble" class="status">
<p>▼ 本文更新于 <span class="timestamp-wrapper"><span class="timestamp">[2026-01-19 周一 22:48]</span></span></p>
</div>
<div id="content" class="content">
<header>
<h1 class="title">emacs-org-mode中同步滴答清单内容</h1>
</header><p>
<a href="https://github.com/TomoeMami/dida">GitHub下载链接</a><br>
</p>
<div id="outline-container-org5e2d849" class="outline-2">
<h2 id="org5e2d849"><span class="section-number-2">1.</span> 基础配置</h2>
<div class="outline-text-2" id="text-1">
<p>
请参考github的README<br>
</p>
</div>
</div>
<div id="outline-container-orgf5bd7d0" class="outline-2">
<h2 id="orgf5bd7d0"><span class="section-number-2">2.</span> 进阶配置</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org07dd235" class="outline-3">
<h3 id="org07dd235"><span class="section-number-3">2.1.</span> 直接capture，不放入指定文件</h3>
<div class="outline-text-3" id="text-2-1">
<p>
<span class="timestamp-wrapper"><time class="timestamp" datetime="2026-01-19T22:28:00">[2026-01-19 周一 22:28]</time></span>：直接调用 <code>org-capture</code> 并将任务输入到指定位置的函数。<br>
</p>
</div>
<div id="outline-container-orgeb7dc7e" class="outline-4">
<h4 id="orgeb7dc7e"><span class="section-number-4">2.1.1.</span> 自定义dida相关函数</h4>
<div class="outline-text-4" id="text-2-1-1">
<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #008858;">(</span><span style="color: #6052cf;">use-package</span> dida <span style="color: #ba35af;">:demand</span> t
  <span style="color: #ba35af;">:vc</span> <span style="color: #4f54aa;">(</span><span style="color: #ba35af;">:url</span> <span style="color: #4250ef;">"git@github.com:TomoeMami/dida"</span>
            <span style="color: #ba35af;">:rev</span> <span style="color: #ba35af;">:last-release</span><span style="color: #4f54aa;">)</span>
  <span style="color: #ba35af;">:config</span>
  <span style="color: #4f54aa;">(</span><span style="color: #6052cf;">setq</span> dida-client-id <span style="color: #4250ef;">"YOUR-CLIENT-ID"</span><span style="color: #4f54aa;">)</span>
  <span style="color: #4f54aa;">(</span><span style="color: #6052cf;">setq</span> dida-client-secret <span style="color: #4250ef;">"YOUR-CLIENT-SECRET"</span><span style="color: #4f54aa;">)</span>
  <span style="color: #4f54aa;">(</span><span style="color: #6052cf;">defun</span> <span style="color: #cf25aa;">dida-simple-task</span> <span style="color: #ba35af;">(</span>task<span style="color: #ba35af;">)</span>
    <span style="color: #ba35af;">(</span><span style="color: #6052cf;">let*</span> <span style="color: #1f77bb;">(</span><span style="color: #b65050;">(</span>id <span style="color: #6052cf;">(</span>alist-get 'id task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>pid <span style="color: #6052cf;">(</span>alist-get 'projectId task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>isallday <span style="color: #6052cf;">(</span>alist-get 'isAllDay task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>title <span style="color: #6052cf;">(</span>alist-get 'title task <span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>content <span style="color: #6052cf;">(</span>alist-get 'content task <span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>status <span style="color: #6052cf;">(</span>alist-get 'status task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>due-date <span style="color: #6052cf;">(</span>alist-get 'dueDate task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>priority <span style="color: #6052cf;">(</span>alist-get 'priority task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>repeatflag <span style="color: #6052cf;">(</span>alist-get 'repeatFlag task<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>deadline-or-scheduled <span style="color: #4250ef;">"SCHEDULED: "</span><span style="color: #b65050;">)</span>
           <span style="color: #b65050;">(</span>h-m <span style="color: #6052cf;">(</span><span style="color: #6052cf;">if</span> <span style="color: #d51272;">(</span>eq isallday '<span style="color: #ba35af;">:json-false</span><span style="color: #d51272;">)</span> <span style="color: #4250ef;">" %H:%M"</span> <span style="color: #4250ef;">""</span><span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span><span style="color: #1f77bb;">)</span>
      <span style="color: #1f77bb;">(</span>concat <span style="color: #b65050;">(</span><span style="color: #6052cf;">if</span> <span style="color: #6052cf;">(</span>= status 2<span style="color: #6052cf;">)</span> <span style="color: #4250ef;">"DONE"</span> <span style="color: #4250ef;">"TODO"</span><span style="color: #b65050;">)</span> <span style="color: #4250ef;">" "</span> title
              <span style="color: #b65050;">(</span><span style="color: #6052cf;">when</span> due-date
               <span style="color: #6052cf;">(</span>concat <span style="color: #4250ef;">"\n"</span> deadline-or-scheduled
                       <span style="color: #d51272;">(</span>format-time-string
                        <span style="color: #008858;">(</span>concat <span style="color: #4250ef;">"&lt;%Y-%m-%d %a"</span>
                                h-m 
                                <span style="color: #4250ef;">"&gt;"</span><span style="color: #008858;">)</span>
                        <span style="color: #008858;">(</span>date-to-time due-date<span style="color: #008858;">)</span><span style="color: #d51272;">)</span><span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
              <span style="color: #b65050;">(</span><span style="color: #6052cf;">when</span> content
                <span style="color: #6052cf;">(</span>concat <span style="color: #4250ef;">"\n"</span> content<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span><span style="color: #1f77bb;">)</span><span style="color: #ba35af;">)</span><span style="color: #4f54aa;">)</span>
  <span style="color: #4f54aa;">(</span><span style="color: #6052cf;">defun</span> <span style="color: #cf25aa;">dida-cut</span> <span style="color: #ba35af;">()</span>
    <span style="color: #506fa0;">"&#20174;dida&#33719;&#21462;&#25152;&#26377;&#20219;&#21153;&#24182;&#21024;&#38500;&#20113;&#31471;&#20219;&#21153;."</span>
    <span style="color: #ba35af;">(</span><span style="color: #6052cf;">interactive</span><span style="color: #ba35af;">)</span>
    <span style="color: #ba35af;">(</span><span style="color: #6052cf;">unless</span> <span style="color: #1f77bb;">(</span>dida--check-token<span style="color: #1f77bb;">)</span>
      <span style="color: #1f77bb;">(</span>dida-authorize<span style="color: #1f77bb;">)</span><span style="color: #ba35af;">)</span>
    <span style="color: #ba35af;">(</span><span style="color: #6052cf;">let</span> <span style="color: #1f77bb;">(</span><span style="color: #b65050;">(</span>projects <span style="color: #6052cf;">(</span>dida-get-user-project<span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
          <span style="color: #b65050;">(</span>result<span style="color: #b65050;">)</span><span style="color: #1f77bb;">)</span>
      <span style="color: #1f77bb;">(</span><span style="color: #6052cf;">dolist</span> <span style="color: #b65050;">(</span>project projects<span style="color: #b65050;">)</span>
        <span style="color: #b65050;">(</span><span style="color: #6052cf;">let*</span> <span style="color: #6052cf;">(</span><span style="color: #d51272;">(</span>project-id <span style="color: #008858;">(</span>alist-get 'id project<span style="color: #008858;">)</span><span style="color: #d51272;">)</span>
               <span style="color: #d51272;">(</span>project-name <span style="color: #008858;">(</span>alist-get 'name project<span style="color: #008858;">)</span><span style="color: #d51272;">)</span>
               <span style="color: #d51272;">(</span>project-data <span style="color: #008858;">(</span>dida-get-project-by-id-with-data project-id<span style="color: #008858;">)</span><span style="color: #d51272;">)</span>
               <span style="color: #d51272;">(</span>tasks <span style="color: #008858;">(</span>append <span style="color: #a45f22;">(</span>alist-get 'tasks project-data<span style="color: #a45f22;">)</span> nil<span style="color: #008858;">)</span><span style="color: #d51272;">)</span><span style="color: #6052cf;">)</span>
          <span style="color: #a65f6a;">;; </span><span style="color: #a65f6a;">Insert all tasks under this project
</span>          <span style="color: #6052cf;">(</span><span style="color: #6052cf;">dolist</span> <span style="color: #d51272;">(</span>task tasks<span style="color: #d51272;">)</span>
            <span style="color: #d51272;">(</span><span style="color: #6052cf;">setf</span> result <span style="color: #008858;">(</span>concat result <span style="color: #a45f22;">(</span>dida-simple-task task<span style="color: #a45f22;">)</span><span style="color: #008858;">)</span><span style="color: #d51272;">)</span>
            <span style="color: #d51272;">(</span>dida-delete-task project-id <span style="color: #008858;">(</span>alist-get 'id task<span style="color: #008858;">)</span><span style="color: #d51272;">)</span><span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span><span style="color: #1f77bb;">)</span>
      result<span style="color: #ba35af;">)</span><span style="color: #4f54aa;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org0d2a217" class="outline-4">
<h4 id="org0d2a217"><span class="section-number-4">2.1.2.</span> 配置doct模板</h4>
<div class="outline-text-4" id="text-2-1-2">
<p>
注意，这里我们使用了 <code>(keyboard-quit)</code> 函数，这个函数会打断当前进行的系列函数，所以不要把这个 <code>(org-capture nil "d")</code> 放进任何hook里。幸运的是我们一般也不需要把他们放进hook中，只需要定时执行拉取就好了。<br>
</p>
<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #008858;">(</span><span style="color: #6052cf;">setq</span> org-capture-templates
      <span style="color: #4f54aa;">(</span>doct '<span style="color: #ba35af;">(</span><span style="color: #1f77bb;">(</span><span style="color: #4250ef;">"Dida Sync"</span> <span style="color: #ba35af;">:keys</span> <span style="color: #4250ef;">"d"</span>
               <span style="color: #a65f6a;">;</span><span style="color: #a65f6a;">&#36825;&#37324;&#25913;&#25104;&#20320;&#24179;&#24120;&#29992;&#30340;agenda files&#20043;&#19968;&#36335;&#24452;
</span>               <span style="color: #ba35af;">:file</span> my-org-timeline
               <span style="color: #a65f6a;">;; </span><span style="color: #a65f6a;">&#20351;&#29992;&#20320;&#24120;&#29992;&#30340;&#23450;&#20301;&#20989;&#25968;&#65292;&#21487;&#24573;&#30053;
</span>               <span style="color: #ba35af;">:function</span> org-reverse-datetree-goto-date-in-file
               <span style="color: #a65f6a;">;; </span><span style="color: #a65f6a;">&#21160;&#24577;&#35843;&#29992;&#36873;&#25321;&#20989;&#25968;&#33719;&#21462;&#20869;&#23481;
</span>               <span style="color: #ba35af;">:template</span> <span style="color: #b65050;">(</span><span style="color: #6052cf;">lambda</span> <span style="color: #6052cf;">()</span> <span style="color: #6052cf;">(</span><span style="color: #6052cf;">let</span> <span style="color: #d51272;">(</span><span style="color: #008858;">(</span>result <span style="color: #a45f22;">(</span>dida-cut<span style="color: #a45f22;">)</span><span style="color: #008858;">)</span><span style="color: #d51272;">)</span>
                             <span style="color: #d51272;">(</span><span style="color: #6052cf;">if</span> <span style="color: #008858;">(</span><span style="color: #6052cf;">and</span> result <span style="color: #a45f22;">(</span>stringp result<span style="color: #a45f22;">)</span><span style="color: #008858;">)</span>
                                 result
                               <span style="color: #a65f6a;">;;</span><span style="color: #a65f6a;">&#27809;&#26377;&#20869;&#23481;&#23601;&#40664;&#40664;&#36864;&#20986;&#21543;&#23401;&#23376;
</span>                               <span style="color: #008858;">(</span>keyboard-quit<span style="color: #008858;">)</span><span style="color: #d51272;">)</span><span style="color: #6052cf;">)</span><span style="color: #b65050;">)</span>
               <span style="color: #a65f6a;">;; </span><span style="color: #a65f6a;">&#25429;&#33719;&#21518;&#31435;&#21363;&#23436;&#25104;&#65292;&#19981;&#38656;&#35201;&#25163;&#21160;&#25353; C-c C-c (&#21487;&#36873;)
</span>               <span style="color: #ba35af;">:immediate-finish</span> t<span style="color: #1f77bb;">)</span>
              <span style="color: #ba35af;">)</span><span style="color: #4f54aa;">)</span><span style="color: #008858;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org28536ea" class="outline-4">
<h4 id="org28536ea"><span class="section-number-4">2.1.3.</span> 定期执行</h4>
<div class="outline-text-4" id="text-2-1-3">
<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #a65f6a;">;;</span><span style="color: #a65f6a;">&#27599;60&#31186;&#25191;&#34892;&#19968;&#27425;
</span><span style="color: #008858;">(</span>run-with-idle-timer 60 t #'<span style="color: #4f54aa;">(</span><span style="color: #6052cf;">lambda</span> <span style="color: #ba35af;">()</span> <span style="color: #ba35af;">(</span>org-capture nil <span style="color: #4250ef;">"d"</span><span style="color: #ba35af;">)</span><span style="color: #4f54aa;">)</span><span style="color: #008858;">)</span>
<span style="color: #a65f6a;">;;</span><span style="color: #a65f6a;">&#21551;&#21160;&#21518;&#31245;&#31561;10&#31186;&#25191;&#34892;&#19968;&#27425;
</span><span style="color: #008858;">(</span>run-at-time 10 nil #'<span style="color: #4f54aa;">(</span><span style="color: #6052cf;">lambda</span> <span style="color: #ba35af;">()</span> <span style="color: #ba35af;">(</span>org-capture nil <span style="color: #4250ef;">"d"</span><span style="color: #ba35af;">)</span><span style="color: #4f54aa;">)</span><span style="color: #008858;">)</span>
</code></pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgf4303ff" class="outline-3">
<h3 id="orgf4303ff"><span class="section-number-3">2.2.</span> 快捷capture</h3>
<div class="outline-text-3" id="text-2-2">
<p>
将 <code>dida.org</code> 中的事项refile到其他文件并把滴答清单该事项删除的函数<br>
</p>
<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #008858;">(</span><span style="color: #6052cf;">defun</span> <span style="color: #cf25aa;">akirak/org-refile-to-cpb-today</span> <span style="color: #4f54aa;">(</span>arg<span style="color: #4f54aa;">)</span>
  <span style="color: #506fa0;">"&#26681;&#25454;&#19981;&#21516;&#24773;&#20917;&#35843;&#25972;refile&#30340;&#30446;&#26631;"</span>
  <span style="color: #4f54aa;">(</span><span style="color: #6052cf;">interactive</span> <span style="color: #4250ef;">"P"</span><span style="color: #4f54aa;">)</span>
  <span style="color: #4f54aa;">(</span><span style="color: #6052cf;">when</span> <span style="color: #ba35af;">(</span>org-entry-is-todo-p<span style="color: #ba35af;">)</span>
      <span style="color: #a65f6a;">;;</span><span style="color: #a65f6a;">dida&#30340;&#35201;&#20808;&#21457;&#36865;delete
</span>      <span style="color: #ba35af;">(</span><span style="color: #6052cf;">when</span> <span style="color: #1f77bb;">(</span>string-match <span style="color: #4250ef;">"dida.org"</span> <span style="color: #b65050;">(</span>buffer-file-name<span style="color: #b65050;">)</span><span style="color: #1f77bb;">)</span>
        <span style="color: #1f77bb;">(</span>dida-delete-task <span style="color: #b65050;">(</span>org-entry-get nil <span style="color: #4250ef;">"DIDA_PID"</span> t<span style="color: #b65050;">)</span> <span style="color: #b65050;">(</span>org-entry-get nil <span style="color: #4250ef;">"DIDA_TID"</span><span style="color: #b65050;">)</span><span style="color: #1f77bb;">)</span><span style="color: #ba35af;">)</span><span style="color: #4f54aa;">)</span><span style="color: #008858;">)</span>
</code></pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org64807e5" class="outline-2">
<h2 id="org64807e5"><span class="section-number-2">3.</span> 使用流程</h2>
<div class="outline-text-2" id="text-3">
<ol class="org-ol">
<li>不在电脑旁边时，用滴答清单快速录入待办事项到指定清单中<br></li>
<li>启动Emacs，同步dida清单到本地<br></li>
<li>切换到 <code>dida.org</code> ，调用上述函数将事项refile到其他org文件中，同时删除滴答清单中的内容；或者将里面的TODO标为DONE，则会自动完成滴答清单中对应事项<br></li>
</ol>
</div>
</div>
<div id="outline-container-org9bc7566" class="outline-2">
<h2 id="org9bc7566"><span class="section-number-2">4.</span> 一些建议</h2>
<div class="outline-text-2" id="text-4">
<p>
因为这个库不会保存org标题的meta内容，所以不建议主力使用，仅作为事项收集的inbox用即可。<br>
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>© Published by <a href="https://www.gnu.org/software/emacs/">Emacs</a> 31.0.50 (<a href="https://orgmode.org">Org</a> mode 9.8-pre)　|　<a href="https://blog.prayhand13013.top/rss.xml">RSS</a>　<a href="https://blog.prayhand13013.top/20251121T151653--english-post-index__wiki.html">English-Index</a></p>
</div>
</body>
</html>
