<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2026-01-06 周二 17:36 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>emacs-windows上使用emacs</title>
<meta name="generator" content="Org Mode" />
<link rel='stylesheet' type='text/css' href='/org.css'/>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="index.html"> HOME </a>
</div><div id="preamble" class="status">
<p>▼ 本文更新于 <span class="timestamp-wrapper"><span class="timestamp">[2026-01-06 周二 17:33]</span></span></p>
</div>
<div id="content" class="content">
<header>
<h1 class="title">emacs-windows上使用emacs</h1>
</header><p>
<span class="timestamp-wrapper"><time class="timestamp" datetime="2024-04-24T16:14:00">[2024-04-24 周三 16:14]</time></span><br>
</p>

<p>
<span class="timestamp-wrapper"><time class="timestamp" datetime="2025-11-28">[2025-11-28 周五]</time></span>： <a href="https://emacs-china.org/t/windows-emacs/30515/11">emacs-china论坛上</a>有人摸索了更具备普遍性的字符编码处理，但对我来说下面的设置刚好能生效。如果感兴趣，可以先看看他的结论。<br>
</p>
<div id="outline-container-org9bcb811" class="outline-2">
<h2 id="org9bcb811"><span class="section-number-2">1.</span> 字体编码处理</h2>
<div class="outline-text-2" id="text-1">
<p>
<a href="https://emacs-china.org/t/org-roam/26545/24?u=tomoemami">org-roam和ripgrep：</a><br>
</p>

<p>
设置org-mode的字符编码，同时开启自动revert功能<br>
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #a7601f;">(</span><span style="color: #006f00;">use-package</span> lazy-revert
  <span style="color: #557400;">:ensure</span> nil
  <span style="color: #8f6f4a;">;; </span><span style="color: #8f6f4a;">:quelpa (lazy-revert :fetcher github
</span>  <span style="color: #8f6f4a;">;;                      </span><span style="color: #8f6f4a;">:repo "yilin-zhang/lazy-revert")
</span>  <span style="color: #557400;">:hook</span> <span style="color: #557400;">(</span>after-init . lazy-revert-mode<span style="color: #557400;">)</span>
  <span style="color: #8f6f4a;">;; </span><span style="color: #8f6f4a;">Optional
</span>  <span style="color: #557400;">:config</span>
  <span style="color: #557400;">(</span><span style="color: #006f00;">setq</span> auto-revert-verbose t <span style="color: #8f6f4a;">; </span><span style="color: #8f6f4a;">let us know when it happens
</span>        auto-revert-use-notify nil
        auto-revert-stop-on-user-input nil
        <span style="color: #8f6f4a;">;; </span><span style="color: #8f6f4a;">Only prompts for confirmation when buffer is unsaved.
</span>        revert-without-query <span style="color: #bf4400;">(</span>list <span style="color: #ca3400;">"."</span><span style="color: #bf4400;">)</span><span style="color: #557400;">)</span><span style="color: #a7601f;">)</span>
<span style="color: #a7601f;">(</span>add-to-list 'file-coding-system-alist '<span style="color: #557400;">(</span><span style="color: #ca3400;">"\\.org\\'"</span> . utf-8<span style="color: #557400;">)</span><span style="color: #a7601f;">)</span>
</code></pre>
</div>

<p>
设置ripgrep的字符编码<br>
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #a7601f;">(</span>add-to-list 'process-coding-system-alist
                        '<span style="color: #557400;">(</span><span style="color: #ca3400;">"[rR][gG]"</span> . <span style="color: #bf4400;">(</span>utf-8 . gbk-dos<span style="color: #bf4400;">)</span><span style="color: #557400;">)</span><span style="color: #a7601f;">)</span>
</code></pre>
</div>

<p>
其他编码设置<br>
</p>

<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #a7601f;">(</span>prefer-coding-system 'utf-8<span style="color: #a7601f;">)</span>
<span style="color: #a7601f;">(</span><span style="color: #006f00;">setq</span> default-buffer-file-coding-system 'utf-8<span style="color: #a7601f;">)</span>
<span style="color: #a7601f;">(</span>set-default 'process-coding-system-alist
             '<span style="color: #557400;">(</span><span style="color: #bf4400;">(</span><span style="color: #ca3400;">"[pP][lL][iI][nN][kK]"</span> gbk-dos . gbk-dos<span style="color: #bf4400;">)</span>
               <span style="color: #bf4400;">(</span><span style="color: #ca3400;">"[cC][mM][dD][pP][rR][oO][xX][yY]"</span> gbk-dos . gbk-dos<span style="color: #bf4400;">)</span><span style="color: #557400;">)</span><span style="color: #a7601f;">)</span>
</code></pre>
</div>
</div>
</div>
<div id="outline-container-org6d8f348" class="outline-2">
<h2 id="org6d8f348"><span class="section-number-2">2.</span> consult</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orga2748c2" class="outline-3">
<h3 id="orga2748c2"><span class="section-number-3">2.1.</span> 调用Everything进行搜索</h3>
<div class="outline-text-3" id="text-2-1">
<p>
下载命令行接口 <code>es.exe</code><br>
</p>

<p>
<a href="https://www.voidtools.com/zh-cn/downloads/#cli">https://www.voidtools.com/zh-cn/downloads/#cli</a><br>
</p>

<p>
<a href="https://emacs-china.org/t/consult/18596/3?u=tomoemami">consult调用everything</a><br>
</p>

<p>
consult配置<br>
</p>
<div class="org-src-container">
<pre class="src src-elisp"><code><span style="color: #a7601f;">(</span><span style="color: #006f00;">use-package</span> consult
  <span style="color: #557400;">:defer</span> t
  <span style="color: #557400;">:init</span>
  <span style="color: #557400;">(</span><span style="color: #006f00;">progn</span>
    <span style="color: #bf4400;">(</span>add-to-list 'process-coding-system-alist '<span style="color: #3f6faf;">(</span><span style="color: #ca3400;">"es"</span> gbk . gbk<span style="color: #3f6faf;">)</span><span style="color: #bf4400;">)</span>
    <span style="color: #bf4400;">(</span>add-to-list 'process-coding-system-alist '<span style="color: #3f6faf;">(</span><span style="color: #ca3400;">"explorer"</span> gbk . gbk<span style="color: #3f6faf;">)</span><span style="color: #bf4400;">)</span>
    <span style="color: #bf4400;">(</span><span style="color: #006f00;">setq</span> consult-locate-args <span style="color: #3f6faf;">(</span>encode-coding-string <span style="color: #ca3400;">"es.exe -i -p -r"</span> 'gbk<span style="color: #3f6faf;">)</span><span style="color: #bf4400;">)</span><span style="color: #557400;">)</span>
  <span style="color: #557400;">:custom</span>
  <span style="color: #557400;">(</span>consult-async-min-input 2<span style="color: #557400;">)</span> <span style="color: #8f6f4a;">;;</span><span style="color: #8f6f4a;">&#20013;&#25991;2&#23383;&#31526;&#24320;&#25628;
</span>  <span style="color: #a7601f;">)</span>
</code></pre>
</div>

<p>
模糊搜索技巧<br>
</p>

<blockquote>
<p>
貌似目前只能通过单个单词搜索之后，在搜索结果后面加上 <code>#</code> 再用orderless的规则去弄。<br>
</p>

<p>
比如 搜索 <code>#emacs#keyword1 keyword2</code> 来过滤，此时可以添加空格<br>
</p>
</blockquote>
</div>
</div>
</div>
<div id="outline-container-orgcae4352" class="outline-2">
<h2 id="orgcae4352"><span class="section-number-2">3.</span> listary唤起emacs client</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-nil"><code>关键字
emacs
标题
Open Emacs
路径
D:\Emacs\bin\emacsclientw.exe
参数
-c -n -f %APPDATA%\emacs-local\server -a "D:\Emacs\bin\runemacs.exe" -e "(select-frame-set-input-focus (selected-frame))"
目录
D:\Emacs\bin
</code></pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>© Published by <a href="https://www.gnu.org/software/emacs/">Emacs</a> 31.0.50 (<a href="https://orgmode.org">Org</a> mode 9.8-pre)　|　<a href="https://tomoemami.github.io/rss.xml">RSS</a>　<a href="https://tomoemami.github.io/20251121T151653--english-post-index__wiki.html">English-Index</a></p>
</div>
</body>
</html>
